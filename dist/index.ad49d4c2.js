const mymap=L.map("checkinMap").setView([-24.801233,132.94551],5),attribution='&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',tileUrl="https://{s}.tile.openstreetmap.de/tiles/osmde/{z}/{x}/{y}.png",tiles=L.tileLayer(tileUrl,{attribution:attribution});tiles.addTo(mymap);const latMinSL=document.getElementById("latMin"),latMaxSL=document.getElementById("latMax"),lonMinSL=document.getElementById("lonMin"),lonMaxSL=document.getElementById("lonMax");var bounds=[[latMaxSL.value,lonMaxSL.value],[latMinSL.value,lonMinSL.value]],boundingBox=L.rectangle(bounds,{color:"#ff7800",weight:1});function resetBoundingBox(){mymap.removeLayer(boundingBox),bounds=[[latMinSL.value,lonMinSL.value],[latMaxSL.value,lonMaxSL.value]],boundingBox=L.rectangle(bounds,{color:"#ff7800",weight:1}),mymap.addLayer(boundingBox)}latMinSL.addEventListener("change",(function(){resetBoundingBox()})),latMaxSL.addEventListener("change",(function(){resetBoundingBox()})),lonMinSL.addEventListener("change",(function(){resetBoundingBox()})),lonMaxSL.addEventListener("change",(function(){resetBoundingBox()}));const minTempSL=document.getElementById("minTemp"),maxTempSL=document.getElementById("maxTemp");var minTemp,maxTemp;minTempSL.addEventListener("change",(function(){minTemp=minTempSL.value,console.log("Min temp: "+minTemp)})),maxTempSL.addEventListener("change",(function(){maxTemp=maxTempSL.value,console.log("Max temp: "+maxTemp)}));const earliestDate=document.getElementById("start"),latestDate=document.getElementById("end");function isSampleInDateRange(e){var t=earliestDate.value.getTime(),n=latestDate.value.getTime();return t<e&&e<n}earliestDate.max=(new Date).toISOString().substring(0,10),latestDate.value=(new Date).toISOString().substring(0,10),latestDate.max=(new Date).toISOString().substring(0,10),getData();var progress=document.getElementById("progress"),progressBar=document.getElementById("progress-bar");function updateProgressBar(e,t,n,a){n>1e3&&(progress.style.display="block",progressBar.style.width=Math.round(e/t*100)+"%"),e===t&&(progress.style.display="none")}var markers=L.markerClusterGroup({chunkedLoading:!0,chunkProgress:updateProgressBar}),markerList=[];async function getData(){var e=0;const t=await fetch("/api"),n=await t.json();for(item of(console.log(Object.keys(n).length),n)){console.log("Getting data : "+e+" "+item),e++;const t=L.marker([item.coord.lat,item.coord.lon]).addTo(mymap);t.bindPopup("Location:"+item.name+"<br/> Weather :"+item.weather[0].description+"<br/> Date:"+item.dateName+"<br/> Temperature :"+item.main.temp+'&deg; C.<br/><br/><audio controls><source src="/audiofiles/'+item.timeStamp+'.wav"> type="audio/wave" </audio>'),markerList.push(t)}console.log(n),markers.addLayers(markerList),myMap.addLayer(markers)}
//# sourceMappingURL=index.ad49d4c2.js.map
